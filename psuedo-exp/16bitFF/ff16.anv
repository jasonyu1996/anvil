proc example (ch)
{
    reg r[15:0]
    out [ch!res |-> 1]:=r
    ch?in=>
        if(type(in)=req) ch!{res, out}
        else{
            tock =>
                r[0|->ch?res]:=in[1];
            then
        }
    then
    
}




proc top(ch)
{
    
    ch!{res,13[0|->2]};
    ch!{req,0};
    ch?out =>
    
    then


}