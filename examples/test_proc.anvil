chan ch {
    left req : (logic@#1) @#1 - @#1,
    right resp : (logic@#1) @#1 - @#1
}
proc test_proc(ep : left ch){
    loop{
        let req = recv ep.req >>
        send ep.resp (req + 1) >>
        // dprint "test_proc" () >>
        cycle 1
    }
    loop{
        dprint "test_proc" () >>
        cycle 1
    }
}