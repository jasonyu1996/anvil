type bit = logic[1];
chan ch{
    left empty : (bit@#1)
}
proc Foo(ep[3] : left ch){
    loop{
        let x =  recv ep[0].empty >>
        dprint "Received: %d" (x) >>
        cycle 1
    }

}


proc test_chan_array(){
    chan ep_le -- ep_ri : ch[3];
    spawn Foo(ep_le[0+:3]);
    
    loop{
            if(1'd1){
                send ep_ri[0].empty(1'b1)
            }
            else{
                send ep_ri[0].empty(1'b0)
            } >> 
            cycle 1
    }
 
}